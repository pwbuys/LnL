import{g as u,o,p as d}from"./chunk-FYXY47SE.js";import{a,b as i}from"./chunk-2NFLSA4Y.js";var m=[{id:"level1",name:"Level 1",speedThresholdMs:1e4},{id:"level2",name:"Level 2",speedThresholdMs:6e3},{id:"level3",name:"Level 3",speedThresholdMs:3e3},{id:"ninja",name:"Ninja",speedThresholdMs:1500}];function g(s){return m.find(e=>e.id===s)??m[0]}var h="school-helper-users",l="school-helper-current-user",c="Default",p=class s{users=o([]);currentUser=o(null);constructor(){this.initializeUsers(),d(()=>{let e=this.currentUser();e?localStorage.setItem(l,e):localStorage.removeItem(l)})}initializeUsers(){let e=this.loadUsers(),r=localStorage.getItem(l);if(e.length===0){let t={name:c,createdAt:new Date};this.users.set([t]),this.currentUser.set(c),this.saveUsers()}else{this.users.set(e);let t=r||e[0].name;e.some(n=>n.name===t)?this.currentUser.set(t):this.currentUser.set(e[0].name)}}loadUsers(){try{let e=localStorage.getItem(h);return e?JSON.parse(e).map(t=>i(a({},t),{createdAt:new Date(t.createdAt)})):[]}catch(e){return console.error("Error loading users from localStorage:",e),[]}}saveUsers(){try{let e=this.users().map(r=>i(a({},r),{createdAt:r.createdAt.toISOString()}));localStorage.setItem(h,JSON.stringify(e))}catch(e){console.error("Error saving users to localStorage:",e)}}createUser(e){let r=e.trim();if(!r||this.users().some(n=>n.name===r))return!1;let t={name:r,createdAt:new Date};return this.users.set([...this.users(),t]),this.saveUsers(),!0}switchUser(e){return this.users().some(t=>t.name===e)?(this.currentUser.set(e),!0):!1}deleteUser(e){if(e===c&&this.users().length===1)return!1;let r=this.users().filter(t=>t.name!==e);return r.length===this.users().length?!1:(this.users.set(r),this.saveUsers(),this.currentUser()===e&&this.currentUser.set(r[0].name),!0)}getCurrentUserName(){return this.currentUser()}static \u0275fac=function(r){return new(r||s)};static \u0275prov=u({token:s,factory:s.\u0275fac,providedIn:"root"})};export{m as a,g as b,p as c};
