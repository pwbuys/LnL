import{a as V}from"./chunk-J23HSJVJ.js";import{a as F}from"./chunk-OHXTROUX.js";import{a as I}from"./chunk-O75NO46C.js";import"./chunk-PDHAO4X2.js";import"./chunk-WHULS3JR.js";import{a as D}from"./chunk-NHPTLCVL.js";import{a as f}from"./chunk-WDXSJPWS.js";import{$ as w,D as b,E as h,F as C,I as k,J as P,K as S,L as o,M as r,N as y,R as M,S as u,U as c,Z as g,_ as a,aa as O,j as x,k as m,l as p,la as E,ma as L,o as v,v as s,y as T}from"./chunk-FYXY47SE.js";import"./chunk-2NFLSA4Y.js";var j=(l,t)=>t.id;function z(l,t){l&1&&(o(0,"p",9),a(1,"No math sets available. Create one to get started!"),r())}function U(l,t){l&1&&(o(0,"span",33),a(1,"\u{1F512}"),r())}function N(l,t){if(l&1){let e=M();o(0,"button",32),u("click",function(){let n=m(e).$implicit,d=c(4);return p(d.selectLevel(n.id))}),h(1,U,2,0,"span",33),o(2,"span",34),a(3),r(),o(4,"span",35),a(5),r()()}if(l&2){let e=t.$implicit,i=c(2).$implicit,n=c(2);g("selected",n.selectedLevel()===e.id)("ninja",e.id==="ninja")("locked",!n.isLevelUnlocked(i.id,e.id)),S("disabled",!n.isLevelUnlocked(i.id,e.id)),b("aria-label",n.getLevelAriaLabel(i.id,e)),s(),C(n.isLevelUnlocked(i.id,e.id)?-1:1),s(2),w(e.name),s(2),O("",e.speedThresholdMs/1e3,"s")}}function A(l,t){if(l&1){let e=M();o(0,"div",17)(1,"div",22)(2,"h3",23),a(3,"Select Mode"),r(),o(4,"div",24)(5,"button",25),u("click",function(){m(e);let n=c(3);return p(n.selectMode("master"))}),a(6," Master "),r(),o(7,"button",26),u("click",function(){m(e);let n=c(3);return p(n.selectTimedMode(30))}),a(8," 30s "),r(),o(9,"button",27),u("click",function(){m(e);let n=c(3);return p(n.selectTimedMode(60))}),a(10," 60s "),r(),o(11,"button",28),u("click",function(){m(e);let n=c(3);return p(n.selectTimedMode(90))}),a(12," 90s "),r()()(),o(13,"div",22)(14,"h3",23),a(15,"Select Level"),r(),o(16,"div",29),k(17,N,6,11,"button",30,j),r()(),o(19,"button",31),u("click",function(){m(e);let n=c().$implicit,d=c(2);return p(d.startExercise(n.id))}),a(20," Start "),r()()}if(l&2){let e=c(3);s(5),g("selected",e.selectedMode()==="master"),s(2),g("selected",e.selectedMode()==="timed"&&e.selectedTimedDuration()===30),s(2),g("selected",e.selectedMode()==="timed"&&e.selectedTimedDuration()===60),s(2),g("selected",e.selectedMode()==="timed"&&e.selectedTimedDuration()===90),s(6),P(e.levels),s(2),S("disabled",!e.canStart())}}function R(l,t){if(l&1){let e=M();o(0,"div",11)(1,"button",12),u("click",function(){let n=m(e).$implicit,d=c(2);return p(d.toggleSetExpansion(n.id))}),o(2,"div",13)(3,"h2",14),a(4),r(),o(5,"span",15),a(6),r()(),y(7,"app-progress-indicator",16),r(),h(8,A,21,9,"div",17),o(9,"div",18)(10,"button",19),u("click",function(n){let d=m(e).$implicit,_=c(2);return p(_.resetProgress(d.id,n))}),a(11," \u21BB "),r(),o(12,"button",20),u("click",function(n){let d=m(e).$implicit,_=c(2);return p(_.editSet(d.id,n))}),a(13," \u270E "),r(),o(14,"button",21),u("click",function(n){let d=m(e).$implicit,_=c(2);return p(_.deleteSet(d.id,n))}),a(15," \u2715 "),r()()()}if(l&2){let e=t.$implicit,i=c(2);g("expanded",i.expandedSetId()===e.id),s(),b("aria-label","Select "+e.name)("aria-expanded",i.expandedSetId()===e.id),s(3),w(e.name),s(2),O("",e.cards.length," cards"),s(),S("cards",i.getCardsWithProgress(e))("setId",e.id),s(),C(i.expandedSetId()===e.id?8:-1),s(2),b("aria-label","Reset progress for "+e.name),s(2),b("aria-label","Edit "+e.name),s(2),b("aria-label","Delete "+e.name)}}function W(l,t){if(l&1&&k(0,R,16,12,"div",10,j),l&2){let e=c();P(e.availableSets())}}var $=class l{mathStateService=x(V);userProgressService=x(D);router=x(E);availableSets=this.mathStateService.availableSets;levels=f;expandedSetId=v(null);selectedMode=v(null);selectedTimedDuration=v(null);selectedLevel=v(null);getCardsWithProgress(t){return this.mathStateService.getCardsWithProgress(t)}toggleSetExpansion(t){this.expandedSetId()===t?(this.expandedSetId.set(null),this.resetSelections()):(this.expandedSetId.set(t),this.selectedMode.set("master"),this.selectedTimedDuration.set(null),this.selectedLevel.set("level1"))}selectMode(t){this.selectedMode.set(t),t==="master"&&this.selectedTimedDuration.set(null)}selectTimedMode(t){this.selectedMode.set("timed"),this.selectedTimedDuration.set(t)}selectLevel(t){let e=this.expandedSetId();e&&this.isLevelUnlocked(e,t)&&this.selectedLevel.set(t)}isLevelUnlocked(t,e){return this.userProgressService.isLevelUnlocked(t,e)}getLevelAriaLabel(t,e){let i=this.isLevelUnlocked(t,e.id),n=`${e.name} - ${e.speedThresholdMs/1e3} seconds`;return i?n:`${n} (locked - complete previous level first)`}getFirstUnlockedLevel(t){for(let e of f)if(!this.isLevelUnlocked(t,e.id)){let i=f.findIndex(n=>n.id===e.id)-1;if(i>=0)return f[i].id;break}return"level1"}canStart(){let t=this.selectedMode(),e=this.selectedLevel();return!(!t||!e||t==="timed"&&!this.selectedTimedDuration())}startExercise(t){if(!this.canStart())return;let e=this.selectedMode(),i=this.selectedLevel(),n=this.selectedTimedDuration()??void 0;this.mathStateService.setCurrentSet(t),this.mathStateService.setExerciseOptions(e,i,n),this.router.navigate(["/math/multiplication-facts/exercise",t])}resetSelections(){this.selectedMode.set(null),this.selectedTimedDuration.set(null),this.selectedLevel.set(null)}editSet(t,e){e.stopPropagation(),this.router.navigate(["/math/multiplication-facts/edit",t])}deleteSet(t,e){e.stopPropagation();let i=this.availableSets().find(n=>n.id===t);i&&confirm(`Are you sure you want to delete "${i.name}"? This action cannot be undone.`)&&this.mathStateService.deleteSet(t)}resetProgress(t,e){e.stopPropagation();let i=this.availableSets().find(n=>n.id===t);i&&confirm(`Are you sure you want to reset all progress for "${i.name}"? This will clear all statistics and weights for this set.`)&&this.mathStateService.resetSetProgress(t)}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=T({type:l,selectors:[["app-set-selection"]],decls:17,vars:1,consts:[[1,"set-selection"],[1,"header"],[1,"header-top"],[1,"header-left"],["routerLink","/","aria-label","Go to home page",1,"home-link"],[1,"subtitle"],[1,"nav"],["routerLink","/math/multiplication-facts/create",1,"nav-link"],[1,"sets-container"],[1,"empty-state"],[1,"set-card-wrapper",3,"expanded"],[1,"set-card-wrapper"],["type","button",1,"set-card",3,"click"],[1,"set-card-header"],[1,"set-name"],[1,"set-count"],[3,"cards","setId"],["role","region","aria-label","Exercise options",1,"expansion-panel"],[1,"set-actions"],["type","button","title","Reset progress",1,"reset-button",3,"click"],["type","button","title","Edit set",1,"edit-button",3,"click"],["type","button","title","Delete set",1,"delete-button",3,"click"],[1,"option-section"],[1,"option-label"],[1,"option-buttons"],["type","button","aria-label","Master mode",1,"option-button",3,"click"],["type","button","aria-label","Timed mode 30 seconds",1,"option-button",3,"click"],["type","button","aria-label","Timed mode 60 seconds",1,"option-button",3,"click"],["type","button","aria-label","Timed mode 90 seconds",1,"option-button",3,"click"],[1,"option-buttons","levels"],["type","button",1,"option-button","level-button",3,"selected","ninja","locked","disabled"],["type","button","aria-label","Start exercise",1,"start-button",3,"click","disabled"],["type","button",1,"option-button","level-button",3,"click","disabled"],["aria-hidden","true",1,"lock-icon"],[1,"level-name"],[1,"level-time"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"a",4),a(5,"\u2190 Home"),r(),o(6,"h1"),a(7,"Math Practice"),r()(),y(8,"app-user-selector"),r(),o(9,"p",5),a(10,"Select a set to practice"),r()(),o(11,"nav",6)(12,"a",7),a(13,"Create New Set"),r()(),o(14,"div",8),h(15,z,2,0,"p",9)(16,W,2,0),r()()),e&2&&(s(15),C(i.availableSets().length===0?15:16))},dependencies:[L,I,F],styles:[".set-selection[_ngcontent-%COMP%]{min-height:100vh;min-height:100dvh;padding:1rem;background:var(--bg-primary, #fff);color:var(--text-primary, #333)}.header[_ngcontent-%COMP%]{margin-bottom:2rem}.header-top[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem;gap:1rem}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex:1;min-width:0}.home-link[_ngcontent-%COMP%]{padding:.5rem 1rem;background:var(--home-link-bg, #f0f0f0);color:var(--home-link-text, #333);text-decoration:none;border-radius:.5rem;font-size:.875rem;font-weight:600;transition:background .2s ease;white-space:nowrap;min-height:44px;display:inline-flex;align-items:center}.home-link[_ngcontent-%COMP%]:hover{background:var(--home-link-hover, #e0e0e0)}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:clamp(2rem,5vw,3rem);margin:0;color:var(--text-primary, #333);flex:1;min-width:0}.subtitle[_ngcontent-%COMP%]{font-size:clamp(1rem,2.5vw,1.25rem);color:var(--text-secondary, #666);margin:0}.nav[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center;margin-bottom:2rem;flex-wrap:wrap}.nav-link[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:var(--button-bg, #4caf50);color:var(--button-text, #fff);text-decoration:none;border-radius:.5rem;font-weight:600;transition:background .2s ease;min-height:44px;display:inline-flex;align-items:center}.nav-link[_ngcontent-%COMP%]:hover{background:var(--button-hover, #45a049)}.sets-container[_ngcontent-%COMP%]{display:grid;gap:1rem;max-width:600px;margin:0 auto}.set-card-wrapper[_ngcontent-%COMP%]{position:relative}.set-card[_ngcontent-%COMP%]{width:100%;padding:1.5rem;background:var(--card-bg, #f9f9f9);border:2px solid var(--card-border, #e0e0e0);border-radius:.75rem;text-align:left;cursor:pointer;transition:all .2s ease;min-height:44px}.set-card[_ngcontent-%COMP%]:hover{border-color:var(--card-hover-border, #4caf50);transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.set-card[_ngcontent-%COMP%]:active{transform:translateY(0)}.set-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.set-name[_ngcontent-%COMP%]{font-size:clamp(1.25rem,3vw,1.5rem);margin:0;color:var(--text-primary, #333)}.set-count[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary, #666);background:var(--badge-bg, #e0e0e0);padding:.25rem .75rem;border-radius:1rem}.set-card-progress[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:.875rem}.progress-label[_ngcontent-%COMP%]{color:var(--text-secondary, #666)}.progress-value[_ngcontent-%COMP%]{font-weight:600;color:var(--text-primary, #333)}.set-actions[_ngcontent-%COMP%]{position:absolute;top:.5rem;right:.5rem;display:flex;gap:.5rem;z-index:10}.reset-button[_ngcontent-%COMP%], .edit-button[_ngcontent-%COMP%], .delete-button[_ngcontent-%COMP%]{width:32px;height:32px;border:none;color:#fff;border-radius:50%;cursor:pointer;font-size:1.25rem;display:flex;align-items:center;justify-content:center;line-height:1;transition:all .2s ease}.reset-button[_ngcontent-%COMP%]{background:var(--reset-bg, #ff9800)}.reset-button[_ngcontent-%COMP%]:hover{background:var(--reset-hover, #f57c00);transform:scale(1.1)}.reset-button[_ngcontent-%COMP%]:active{transform:scale(.95)}.edit-button[_ngcontent-%COMP%]{background:var(--edit-bg, #2196f3)}.edit-button[_ngcontent-%COMP%]:hover{background:var(--edit-hover, #1976d2);transform:scale(1.1)}.edit-button[_ngcontent-%COMP%]:active{transform:scale(.95)}.delete-button[_ngcontent-%COMP%]{background:var(--delete-bg, #f44336)}.delete-button[_ngcontent-%COMP%]:hover{background:var(--delete-hover, #d32f2f);transform:scale(1.1)}.delete-button[_ngcontent-%COMP%]:active{transform:scale(.95)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem 1rem;color:var(--text-secondary, #666);font-size:1.125rem}.set-card-wrapper.expanded[_ngcontent-%COMP%]   .set-card[_ngcontent-%COMP%]{border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom:none}.expansion-panel[_ngcontent-%COMP%]{background:var(--card-bg, #f9f9f9);border:2px solid var(--card-border, #e0e0e0);border-top:none;border-radius:0 0 .75rem .75rem;padding:1.5rem;display:flex;flex-direction:column;gap:1.5rem}.option-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.option-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--text-secondary, #666);margin:0;text-transform:uppercase;letter-spacing:.05em}.option-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap}.option-buttons.levels[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:.5rem}.option-button[_ngcontent-%COMP%]{flex:1;min-width:60px;padding:.75rem 1rem;border:2px solid var(--option-border, #ccc);background:var(--option-bg, #fff);color:var(--text-primary, #333);border-radius:.5rem;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s ease;min-height:44px}.option-button[_ngcontent-%COMP%]:hover{border-color:var(--option-hover-border, #4caf50);background:var(--option-hover-bg, #e8f5e9)}.option-button.selected[_ngcontent-%COMP%]{border-color:var(--option-selected-border, #4caf50);background:var(--option-selected-bg, #4caf50);color:var(--option-selected-text, #fff)}.level-button[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.25rem;padding:.75rem}.level-name[_ngcontent-%COMP%]{font-weight:700}.level-time[_ngcontent-%COMP%]{font-size:.75rem;opacity:.8}.level-button.ninja[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a1a1a,#333);border-color:#1a1a1a;color:#fff}.level-button.ninja[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#333,#444);border-color:#444}.level-button.ninja.selected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#000,#1a1a1a);border-color:#4caf50;box-shadow:0 0 0 2px #4caf50}.level-button.locked[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed;position:relative}.level-button.locked[_ngcontent-%COMP%]:hover{border-color:var(--option-border, #ccc);background:var(--option-bg, #fff)}.level-button.ninja.locked[_ngcontent-%COMP%], .level-button.ninja.locked[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#2a2a2a,#444)}.lock-icon[_ngcontent-%COMP%]{position:absolute;top:.25rem;right:.25rem;font-size:.75rem}.start-button[_ngcontent-%COMP%]{width:100%;padding:1rem;background:var(--start-bg, #4caf50);color:var(--start-text, #fff);border:none;border-radius:.5rem;font-size:1.25rem;font-weight:700;cursor:pointer;transition:all .2s ease;min-height:56px;text-transform:uppercase;letter-spacing:.1em}.start-button[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--start-hover, #45a049);transform:translateY(-2px);box-shadow:0 4px 12px #4caf504d}.start-button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}@media(prefers-color-scheme:dark){.set-selection[_ngcontent-%COMP%]{--bg-primary: #1a1a1a;--text-primary: #fff;--text-secondary: #aaa;--card-bg: #2a2a2a;--card-border: #444;--card-hover-border: #4caf50;--button-bg: #4caf50;--button-hover: #45a049;--button-text: #fff;--badge-bg: #444;--edit-bg: #2196f3;--edit-hover: #1976d2;--delete-bg: #f44336;--delete-hover: #d32f2f;--reset-bg: #ff9800;--reset-hover: #f57c00;--home-link-bg: #333;--home-link-text: #fff;--home-link-hover: #444;--option-bg: #333;--option-border: #555;--option-hover-bg: #3a3a3a;--option-hover-border: #4caf50;--option-selected-bg: #4caf50;--option-selected-border: #4caf50;--option-selected-text: #fff;--start-bg: #4caf50;--start-hover: #45a049;--start-text: #fff}}"],changeDetection:0})};export{$ as SetSelectionComponent};
