import{a as l,b as w,d as O,e as k}from"./chunk-FROR47W7.js";import{$ as d,E as g,F as u,I as h,J as C,O as n,P as r,R as M,T as b,U as v,Z as S,_ as o,aa as f,ea as c,j as p,k as _,l as y,la as P,v as a,y as E}from"./chunk-FYXY47SE.js";import"./chunk-2NFLSA4Y.js";var N=(i,t)=>t.id;function T(i,t){if(i&1&&(n(0,"div",2)(1,"span",8),o(2),r(),n(3,"span",9),o(4),r()()),i&2){let e=v();a(),S("timed",e.isTimedMode()),a(),f(" ",e.isTimedMode()?"Timed":"Master"," "),a(),S("ninja",e.sessionStats().level==="ninja"),a(),f(" ",e.levelName()," ")}}function L(i,t){if(i&1&&(n(0,"div",10)(1,"div",22),o(2),r(),n(3,"div",23),o(4),r()()),i&2){let e=v(2);a(2),d(e.sessionStats().correctAnswers),a(2),f("correct answers in ",e.sessionStats().timedDuration,"s")}}function A(i,t){if(i&1&&(n(0,"li",25)(1,"span",26),o(2),r(),n(3,"span",27),o(4),r()()),i&2){let e=t.$implicit;a(2),d(e.question),a(2),f("Weight: ",e.weight)}}function z(i,t){if(i&1&&(n(0,"div",20)(1,"h2"),o(2,"Needs Work On:"),r(),n(3,"ul",24),h(4,A,5,2,"li",25,N),r()()),i&2){let e=v(2);a(4),C(e.cardsNeedingWork())}}function D(i,t){i&1&&(n(0,"div",21)(1,"p"),o(2,"Great job! All cards are mastered!"),r()())}function W(i,t){if(i&1&&(g(0,L,5,2,"div",10),n(1,"div",11)(2,"div",12)(3,"div",13),o(4,"Total Questions"),r(),n(5,"div",14),o(6),r()(),n(7,"div",12)(8,"div",13),o(9,"Correct Answers"),r(),n(10,"div",15),o(11),r()(),n(12,"div",12)(13,"div",13),o(14,"Fast Answers"),r(),n(15,"div",16),o(16),r()(),n(17,"div",12)(18,"div",13),o(19,"Slow Answers"),r(),n(20,"div",17),o(21),r()(),n(22,"div",12)(23,"div",13),o(24,"Incorrect Answers"),r(),n(25,"div",18),o(26),r()(),n(27,"div",12)(28,"div",13),o(29,"Average Time"),r(),n(30,"div",14),o(31),r()(),n(32,"div",19)(33,"div",13),o(34,"Accuracy"),r(),n(35,"div",14),o(36),r()()(),g(37,z,6,0,"div",20)(38,D,3,0,"div",21)),i&2){let e=v();u(e.isTimedMode()?0:-1),a(6),d(e.sessionStats().totalQuestions),a(5),d(e.sessionStats().correctAnswers),a(5),d(e.sessionStats().fastAnswers),a(5),d(e.sessionStats().slowAnswers),a(5),d(e.sessionStats().incorrectAnswers),a(5),d(e.averageTimeFormatted()),a(5),f("",e.accuracyPercentage(),"%"),a(),u(e.cardsNeedingWork().length>0?37:38)}}function j(i,t){i&1&&(n(0,"div",3)(1,"p"),o(2,"No session statistics available."),r()())}function F(i,t){if(i&1){let e=M();n(0,"button",28),b("click",function(){_(e);let m=v();return y(m.startNextLevel())}),o(1," Next Level \u2192 "),r()}}var I=class i{mathStateService=p(k);userProgressService=p(O);router=p(P);sessionStats=this.mathStateService.currentSessionStats;currentSet=this.mathStateService.currentSet;isTimedMode=c(()=>this.sessionStats()?.mode==="timed");levelName=c(()=>{let t=this.sessionStats();return t?.level?w(t.level).name:"Level 1"});accuracyPercentage=c(()=>{let t=this.sessionStats();return!t||t.totalQuestions===0?0:Math.round(t.correctAnswers/t.totalQuestions*100)});averageTimeFormatted=c(()=>{let t=this.sessionStats();return t?`${Math.round(t.averageTimeMs/1e3)}s`:"0s"});cardsNeedingWork=c(()=>{let t=this.currentSet();return t?this.mathStateService.getCardsWithProgress(t).filter(s=>s.weight>1).sort((s,m)=>m.weight-s.weight).slice(0,10):[]});canStartNextLevel=c(()=>{let t=this.sessionStats(),e=this.currentSet();if(!t||t.mode!=="master"||!t.level||!e)return!1;let s=l.findIndex(x=>x.id===t.level);if(s===-1||s>=l.length-1)return!1;let m=this.userProgressService.getSetMastery(e.id);return m?l.findIndex(x=>x.id===m)>=s:!1});getNextLevelId(){let t=this.sessionStats();if(!t?.level)return null;let e=l.findIndex(s=>s.id===t.level);return e===-1||e>=l.length-1?null:l[e+1].id}startNextLevel(){let t=this.currentSet(),e=this.getNextLevelId();t&&e&&(this.mathStateService.setExerciseOptions("master",e),this.mathStateService.startSession(),this.router.navigate(["/math/exercise",t.id]))}startNewSession(){let t=this.currentSet();t?(this.mathStateService.startSession(),this.router.navigate(["/math/exercise",t.id])):this.router.navigate(["/math"])}goToSets(){this.router.navigate(["/math"])}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=E({type:i,selectors:[["app-summary"]],decls:13,vars:3,consts:[[1,"summary"],[1,"header"],[1,"session-info"],[1,"no-stats"],[1,"actions"],["type","button",1,"action-button","action-button-next-level"],["type","button",1,"action-button","action-button-primary",3,"click"],["type","button",1,"action-button","action-button-secondary",3,"click"],[1,"mode-badge"],[1,"level-badge"],[1,"timed-result"],[1,"stats-container"],[1,"stat-card"],[1,"stat-label"],[1,"stat-value"],[1,"stat-value","stat-correct"],[1,"stat-value","stat-fast"],[1,"stat-value","stat-slow"],[1,"stat-value","stat-incorrect"],[1,"stat-card","stat-card-full"],[1,"needs-work-section"],[1,"all-mastered"],[1,"timed-score"],[1,"timed-label"],[1,"needs-work-list"],[1,"needs-work-item"],[1,"card-question"],[1,"card-weight"],["type","button",1,"action-button","action-button-next-level",3,"click"]],template:function(e,s){e&1&&(n(0,"div",0)(1,"header",1)(2,"h1"),o(3,"Session Summary"),r(),g(4,T,5,6,"div",2),r(),g(5,W,39,9)(6,j,3,0,"div",3),n(7,"div",4),g(8,F,2,0,"button",5),n(9,"button",6),b("click",function(){return s.startNewSession()}),o(10," Start New Session "),r(),n(11,"button",7),b("click",function(){return s.goToSets()}),o(12," Back to Sets "),r()()()),e&2&&(a(4),u(s.sessionStats()?4:-1),a(),u(s.sessionStats()?5:6),a(3),u(s.canStartNextLevel()?8:-1))},styles:[".summary[_ngcontent-%COMP%]{min-height:100vh;min-height:100dvh;padding:1rem;background:var(--bg-primary, #fff);color:var(--text-primary, #333);max-width:800px;margin:0 auto}.header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:clamp(2rem,5vw,3rem);margin:0 0 .75rem;color:var(--text-primary, #333)}.session-info[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:.5rem}.mode-badge[_ngcontent-%COMP%], .level-badge[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;padding:.25rem .75rem;border-radius:1rem;background:var(--badge-bg, #e0e0e0);color:var(--text-primary, #333)}.mode-badge.timed[_ngcontent-%COMP%]{background:var(--timed-bg, #2196f3);color:#fff}.level-badge.ninja[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a1a1a,#333);color:#fff}.timed-result[_ngcontent-%COMP%]{text-align:center;padding:2rem;background:var(--timed-result-bg, #e3f2fd);border:2px solid var(--timed-result-border, #2196f3);border-radius:.75rem;margin-bottom:2rem}.timed-score[_ngcontent-%COMP%]{font-size:clamp(4rem,15vw,8rem);font-weight:800;color:var(--timed-score-color, #2196f3);line-height:1;margin-bottom:.5rem}.timed-label[_ngcontent-%COMP%]{font-size:clamp(1rem,3vw,1.5rem);color:var(--text-secondary, #666);font-weight:500}.stats-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1rem;margin-bottom:2rem}.stat-card[_ngcontent-%COMP%]{padding:1.5rem;background:var(--card-bg, #f9f9f9);border:2px solid var(--card-border, #e0e0e0);border-radius:.75rem;text-align:center}.stat-card-full[_ngcontent-%COMP%]{grid-column:1/-1}.stat-label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary, #666);margin-bottom:.5rem}.stat-value[_ngcontent-%COMP%]{font-size:clamp(1.5rem,4vw,2.5rem);font-weight:700;color:var(--text-primary, #333)}.stat-correct[_ngcontent-%COMP%]{color:var(--success-color, #4caf50)}.stat-fast[_ngcontent-%COMP%]{color:var(--fast-color, #2196f3)}.stat-slow[_ngcontent-%COMP%]{color:var(--slow-color, #ff9800)}.stat-incorrect[_ngcontent-%COMP%]{color:var(--error-color, #f44336)}.needs-work-section[_ngcontent-%COMP%]{margin-bottom:2rem}.needs-work-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:clamp(1.25rem,3vw,1.75rem);margin:0 0 1rem;color:var(--text-primary, #333)}.needs-work-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:.75rem}.needs-work-item[_ngcontent-%COMP%]{padding:1rem;background:var(--card-bg, #f9f9f9);border:2px solid var(--card-border, #e0e0e0);border-radius:.5rem;display:flex;justify-content:space-between;align-items:center}.card-question[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:var(--text-primary, #333)}.card-weight[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary, #666);background:var(--badge-bg, #e0e0e0);padding:.25rem .75rem;border-radius:1rem}.all-mastered[_ngcontent-%COMP%]{text-align:center;padding:2rem;background:var(--success-bg, #e8f5e9);border:2px solid var(--success-border, #4caf50);border-radius:.75rem;margin-bottom:2rem}.all-mastered[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--success-color, #2e7d32);margin:0}.no-stats[_ngcontent-%COMP%]{text-align:center;padding:3rem 1rem;color:var(--text-secondary, #666)}.actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-top:2rem}.action-button[_ngcontent-%COMP%]{width:100%;padding:.75rem 1.5rem;font-size:1rem;font-weight:600;border-radius:.5rem;cursor:pointer;min-height:44px;border:2px solid;transition:all .2s ease}.action-button-primary[_ngcontent-%COMP%]{background:var(--button-primary-bg, #4caf50);color:var(--button-primary-text, #fff);border-color:var(--button-primary-border, #45a049)}.action-button-primary[_ngcontent-%COMP%]:hover{background:var(--button-primary-hover, #45a049)}.action-button-secondary[_ngcontent-%COMP%]{background:transparent;color:var(--text-primary, #333);border-color:var(--button-secondary-border, #ccc)}.action-button-secondary[_ngcontent-%COMP%]:hover{background:var(--button-secondary-bg, #f0f0f0)}.action-button-next-level[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff9800,#f57c00);color:#fff;border-color:#f57c00;font-size:1.125rem}.action-button-next-level[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#f57c00,#ef6c00)}@media(prefers-color-scheme:dark){.summary[_ngcontent-%COMP%]{--bg-primary: #1a1a1a;--text-primary: #fff;--text-secondary: #aaa;--card-bg: #2a2a2a;--card-border: #444;--badge-bg: #444;--success-bg: #1b5e20;--success-border: #4caf50;--success-color: #4caf50;--fast-color: #2196f3;--slow-color: #ff9800;--error-color: #f44336;--button-primary-bg: #4caf50;--button-primary-hover: #45a049;--button-primary-border: #45a049;--button-primary-text: #fff;--button-secondary-border: #555;--button-secondary-bg: #333;--timed-bg: #2196f3;--timed-result-bg: #1565c0;--timed-result-border: #2196f3;--timed-score-color: #64b5f6}}"],changeDetection:0})};export{I as SummaryComponent};
