import{d as I}from"./chunk-FROR47W7.js";import{$ as M,D as m,E as g,F as p,H as y,I as C,J as h,O as a,P as o,Q as _,U as l,Y as b,Z as x,_ as i,aa as u,ba as P,da as E,ea as d,ga as c,j as f,v as s,y as v}from"./chunk-FYXY47SE.js";var D=()=>[1,2,3,4];function N(r,t){if(r&1&&(a(0,"div",0)(1,"div",2)(2,"span",3),i(3),o(),a(4,"span",4),i(5),o()(),a(6,"div",5),_(7,"div",6),o()()),r&2){let e=l();m("aria-valuenow",e.masteredCount())("aria-valuemin",0)("aria-valuemax",e.totalCards())("aria-label","Mastery progress: "+e.masteredCount()+" of "+e.totalCards()+" cards mastered"),s(3),P("Mastery: ",e.masteredCount()," / ",e.totalCards()),s(2),u("",e.percentage(),"%"),s(2),b("width",e.percentage(),"%")}}function O(r,t){r&1&&(a(0,"div",7)(1,"span",9),i(2,"\u{1F977}"),o(),a(3,"span",10),i(4,"Ninja Master"),o()())}function w(r,t){if(r&1&&(a(0,"span",13),i(1),o()),r&2){let e=t.$implicit,n=l(3);x("filled",e<=n.masteryStars())("empty",e>n.masteryStars()),s(),u(" ",e<=n.masteryStars()?"\u2605":"\u2606"," ")}}function L(r,t){if(r&1&&(a(0,"div",8)(1,"div",11),C(2,w,2,5,"span",12,y),o(),a(4,"span",10),i(5),o()()),r&2){let e=l(2);s(2),h(E(1,D)),s(3),M(e.masteryLabel())}}function j(r,t){if(r&1&&(a(0,"div",1),g(1,O,5,0,"div",7)(2,L,6,2,"div",8),o()),r&2){let e=l();m("aria-label",e.ariaLabel()),s(),p(e.masteryStars()===4?1:2)}}var S=class r{userProgressService=f(I);cards=c.required();setId=c("");showProgressBar=c(!1);currentLevelId=c(null);totalCards=d(()=>this.cards().length);masteredCount=d(()=>{let t=this.currentLevelId(),e=this.cards();return t?e.filter(n=>this.userProgressService.isCardMasteredAtLevel(n.id,t)).length:e.filter(n=>n.weight===1&&n.stats.totalAttempts>0).length});percentage=d(()=>{let t=this.totalCards();return t===0?0:Math.round(this.masteredCount()/t*100)});masteryStars=d(()=>{let t=this.setId();return t?this.userProgressService.getMasteryStars(t):0});masteryLabel=d(()=>{let t=this.masteryStars();return t===0?"Not mastered":t===4?"Ninja Master":`Level ${t} mastered`});ariaLabel=d(()=>{let t=this.masteryStars();return t===0?"No levels mastered yet":t===4?"Ninja level mastered":`${t} of 4 levels mastered`});static \u0275fac=function(e){return new(e||r)};static \u0275cmp=v({type:r,selectors:[["app-progress-indicator"]],inputs:{cards:[1,"cards"],setId:[1,"setId"],showProgressBar:[1,"showProgressBar"],currentLevelId:[1,"currentLevelId"]},decls:2,vars:1,consts:[["role","progressbar",1,"progress-indicator"],["role","img",1,"progress-indicator"],[1,"progress-label"],[1,"progress-text"],[1,"progress-percentage"],[1,"progress-bar-container"],[1,"progress-bar"],[1,"mastery-display","ninja"],[1,"mastery-display"],["aria-hidden","true",1,"ninja-icon"],[1,"mastery-label"],[1,"stars-container"],["aria-hidden","true",1,"star",3,"filled","empty"],["aria-hidden","true",1,"star"]],template:function(e,n){e&1&&g(0,N,8,9,"div",0)(1,j,3,2,"div",1),e&2&&p(n.showProgressBar()?0:1)},styles:[".progress-indicator[_ngcontent-%COMP%]{width:100%}.progress-label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem;font-size:.875rem}.progress-text[_ngcontent-%COMP%]{color:var(--text-secondary, #666)}.progress-percentage[_ngcontent-%COMP%]{font-weight:600;color:var(--text-primary, #333)}.progress-bar-container[_ngcontent-%COMP%]{width:100%;height:.5rem;background:var(--progress-bg, #e0e0e0);border-radius:.25rem;overflow:hidden}.progress-bar[_ngcontent-%COMP%]{height:100%;background:var(--progress-fill, #4caf50);border-radius:.25rem;transition:width .3s ease}.mastery-display[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.mastery-display.ninja[_ngcontent-%COMP%]{justify-content:flex-start}.stars-container[_ngcontent-%COMP%]{display:flex;gap:.25rem}.star[_ngcontent-%COMP%]{font-size:1.25rem;line-height:1}.star.filled[_ngcontent-%COMP%]{color:var(--star-filled, #ffc107)}.star.empty[_ngcontent-%COMP%]{color:var(--star-empty, #ccc)}.ninja-icon[_ngcontent-%COMP%]{font-size:1.5rem;line-height:1}.mastery-label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary, #666)}.mastery-display.ninja[_ngcontent-%COMP%]   .mastery-label[_ngcontent-%COMP%]{font-weight:600;color:var(--ninja-text, #333)}@media(prefers-color-scheme:dark){.progress-indicator[_ngcontent-%COMP%]{--text-primary: #fff;--text-secondary: #aaa;--progress-bg: #444;--progress-fill: #4caf50;--star-filled: #ffc107;--star-empty: #555;--ninja-text: #fff}}"],changeDetection:0})};export{S as a};
