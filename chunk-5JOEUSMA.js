import{b as y,e as C}from"./chunk-FROR47W7.js";import{$ as d,E as l,F as g,I as _,J as S,O as o,P as n,T as f,U as u,Z as b,_ as r,aa as m,ea as c,j as p,la as E,v as i,y as x}from"./chunk-FYXY47SE.js";import"./chunk-2NFLSA4Y.js";var M=(a,e)=>e.id;function w(a,e){if(a&1&&(o(0,"div",2)(1,"span",7),r(2),n(),o(3,"span",8),r(4),n()()),a&2){let t=u();i(),b("timed",t.isTimedMode()),i(),m(" ",t.isTimedMode()?"Timed":"Master"," "),i(),b("ninja",t.sessionStats().level==="ninja"),i(),m(" ",t.levelName()," ")}}function P(a,e){if(a&1&&(o(0,"div",9)(1,"div",21),r(2),n(),o(3,"div",22),r(4),n()()),a&2){let t=u(2);i(2),d(t.sessionStats().correctAnswers),i(2),m("correct answers in ",t.sessionStats().timedDuration,"s")}}function O(a,e){if(a&1&&(o(0,"li",24)(1,"span",25),r(2),n(),o(3,"span",26),r(4),n()()),a&2){let t=e.$implicit;i(2),d(t.question),i(2),m("Weight: ",t.weight)}}function k(a,e){if(a&1&&(o(0,"div",19)(1,"h2"),r(2,"Needs Work On:"),n(),o(3,"ul",23),_(4,O,5,2,"li",24,M),n()()),a&2){let t=u(2);i(4),S(t.cardsNeedingWork())}}function T(a,e){a&1&&(o(0,"div",20)(1,"p"),r(2,"Great job! All cards are mastered!"),n()())}function N(a,e){if(a&1&&(l(0,P,5,2,"div",9),o(1,"div",10)(2,"div",11)(3,"div",12),r(4,"Total Questions"),n(),o(5,"div",13),r(6),n()(),o(7,"div",11)(8,"div",12),r(9,"Correct Answers"),n(),o(10,"div",14),r(11),n()(),o(12,"div",11)(13,"div",12),r(14,"Fast Answers"),n(),o(15,"div",15),r(16),n()(),o(17,"div",11)(18,"div",12),r(19,"Slow Answers"),n(),o(20,"div",16),r(21),n()(),o(22,"div",11)(23,"div",12),r(24,"Incorrect Answers"),n(),o(25,"div",17),r(26),n()(),o(27,"div",11)(28,"div",12),r(29,"Average Time"),n(),o(30,"div",13),r(31),n()(),o(32,"div",18)(33,"div",12),r(34,"Accuracy"),n(),o(35,"div",13),r(36),n()()(),l(37,k,6,0,"div",19)(38,T,3,0,"div",20)),a&2){let t=u();g(t.isTimedMode()?0:-1),i(6),d(t.sessionStats().totalQuestions),i(5),d(t.sessionStats().correctAnswers),i(5),d(t.sessionStats().fastAnswers),i(5),d(t.sessionStats().slowAnswers),i(5),d(t.sessionStats().incorrectAnswers),i(5),d(t.averageTimeFormatted()),i(5),m("",t.accuracyPercentage(),"%"),i(),g(t.cardsNeedingWork().length>0?37:38)}}function I(a,e){a&1&&(o(0,"div",3)(1,"p"),r(2,"No session statistics available."),n()())}var h=class a{mathStateService=p(C);router=p(E);sessionStats=this.mathStateService.currentSessionStats;currentSet=this.mathStateService.currentSet;isTimedMode=c(()=>this.sessionStats()?.mode==="timed");levelName=c(()=>{let e=this.sessionStats();return e?.level?y(e.level).name:"Level 1"});accuracyPercentage=c(()=>{let e=this.sessionStats();return!e||e.totalQuestions===0?0:Math.round(e.correctAnswers/e.totalQuestions*100)});averageTimeFormatted=c(()=>{let e=this.sessionStats();return e?`${Math.round(e.averageTimeMs/1e3)}s`:"0s"});cardsNeedingWork=c(()=>{let e=this.currentSet();return e?this.mathStateService.getCardsWithProgress(e).filter(s=>s.weight>1).sort((s,v)=>v.weight-s.weight).slice(0,10):[]});startNewSession(){let e=this.currentSet();e?(this.mathStateService.startSession(),this.router.navigate(["/math/exercise",e.id])):this.router.navigate(["/math"])}goToSets(){this.router.navigate(["/math"])}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=x({type:a,selectors:[["app-summary"]],decls:12,vars:2,consts:[[1,"summary"],[1,"header"],[1,"session-info"],[1,"no-stats"],[1,"actions"],["type","button",1,"action-button","action-button-primary",3,"click"],["type","button",1,"action-button","action-button-secondary",3,"click"],[1,"mode-badge"],[1,"level-badge"],[1,"timed-result"],[1,"stats-container"],[1,"stat-card"],[1,"stat-label"],[1,"stat-value"],[1,"stat-value","stat-correct"],[1,"stat-value","stat-fast"],[1,"stat-value","stat-slow"],[1,"stat-value","stat-incorrect"],[1,"stat-card","stat-card-full"],[1,"needs-work-section"],[1,"all-mastered"],[1,"timed-score"],[1,"timed-label"],[1,"needs-work-list"],[1,"needs-work-item"],[1,"card-question"],[1,"card-weight"]],template:function(t,s){t&1&&(o(0,"div",0)(1,"header",1)(2,"h1"),r(3,"Session Summary"),n(),l(4,w,5,6,"div",2),n(),l(5,N,39,9)(6,I,3,0,"div",3),o(7,"div",4)(8,"button",5),f("click",function(){return s.startNewSession()}),r(9," Start New Session "),n(),o(10,"button",6),f("click",function(){return s.goToSets()}),r(11," Back to Sets "),n()()()),t&2&&(i(4),g(s.sessionStats()?4:-1),i(),g(s.sessionStats()?5:6))},styles:[".summary[_ngcontent-%COMP%]{min-height:100vh;min-height:100dvh;padding:1rem;background:var(--bg-primary, #fff);color:var(--text-primary, #333);max-width:800px;margin:0 auto}.header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:clamp(2rem,5vw,3rem);margin:0 0 .75rem;color:var(--text-primary, #333)}.session-info[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:.5rem}.mode-badge[_ngcontent-%COMP%], .level-badge[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;padding:.25rem .75rem;border-radius:1rem;background:var(--badge-bg, #e0e0e0);color:var(--text-primary, #333)}.mode-badge.timed[_ngcontent-%COMP%]{background:var(--timed-bg, #2196f3);color:#fff}.level-badge.ninja[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a1a1a,#333);color:#fff}.timed-result[_ngcontent-%COMP%]{text-align:center;padding:2rem;background:var(--timed-result-bg, #e3f2fd);border:2px solid var(--timed-result-border, #2196f3);border-radius:.75rem;margin-bottom:2rem}.timed-score[_ngcontent-%COMP%]{font-size:clamp(4rem,15vw,8rem);font-weight:800;color:var(--timed-score-color, #2196f3);line-height:1;margin-bottom:.5rem}.timed-label[_ngcontent-%COMP%]{font-size:clamp(1rem,3vw,1.5rem);color:var(--text-secondary, #666);font-weight:500}.stats-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1rem;margin-bottom:2rem}.stat-card[_ngcontent-%COMP%]{padding:1.5rem;background:var(--card-bg, #f9f9f9);border:2px solid var(--card-border, #e0e0e0);border-radius:.75rem;text-align:center}.stat-card-full[_ngcontent-%COMP%]{grid-column:1/-1}.stat-label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary, #666);margin-bottom:.5rem}.stat-value[_ngcontent-%COMP%]{font-size:clamp(1.5rem,4vw,2.5rem);font-weight:700;color:var(--text-primary, #333)}.stat-correct[_ngcontent-%COMP%]{color:var(--success-color, #4caf50)}.stat-fast[_ngcontent-%COMP%]{color:var(--fast-color, #2196f3)}.stat-slow[_ngcontent-%COMP%]{color:var(--slow-color, #ff9800)}.stat-incorrect[_ngcontent-%COMP%]{color:var(--error-color, #f44336)}.needs-work-section[_ngcontent-%COMP%]{margin-bottom:2rem}.needs-work-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:clamp(1.25rem,3vw,1.75rem);margin:0 0 1rem;color:var(--text-primary, #333)}.needs-work-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:.75rem}.needs-work-item[_ngcontent-%COMP%]{padding:1rem;background:var(--card-bg, #f9f9f9);border:2px solid var(--card-border, #e0e0e0);border-radius:.5rem;display:flex;justify-content:space-between;align-items:center}.card-question[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:var(--text-primary, #333)}.card-weight[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary, #666);background:var(--badge-bg, #e0e0e0);padding:.25rem .75rem;border-radius:1rem}.all-mastered[_ngcontent-%COMP%]{text-align:center;padding:2rem;background:var(--success-bg, #e8f5e9);border:2px solid var(--success-border, #4caf50);border-radius:.75rem;margin-bottom:2rem}.all-mastered[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--success-color, #2e7d32);margin:0}.no-stats[_ngcontent-%COMP%]{text-align:center;padding:3rem 1rem;color:var(--text-secondary, #666)}.actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-top:2rem}.action-button[_ngcontent-%COMP%]{width:100%;padding:.75rem 1.5rem;font-size:1rem;font-weight:600;border-radius:.5rem;cursor:pointer;min-height:44px;border:2px solid;transition:all .2s ease}.action-button-primary[_ngcontent-%COMP%]{background:var(--button-primary-bg, #4caf50);color:var(--button-primary-text, #fff);border-color:var(--button-primary-border, #45a049)}.action-button-primary[_ngcontent-%COMP%]:hover{background:var(--button-primary-hover, #45a049)}.action-button-secondary[_ngcontent-%COMP%]{background:transparent;color:var(--text-primary, #333);border-color:var(--button-secondary-border, #ccc)}.action-button-secondary[_ngcontent-%COMP%]:hover{background:var(--button-secondary-bg, #f0f0f0)}@media(prefers-color-scheme:dark){.summary[_ngcontent-%COMP%]{--bg-primary: #1a1a1a;--text-primary: #fff;--text-secondary: #aaa;--card-bg: #2a2a2a;--card-border: #444;--badge-bg: #444;--success-bg: #1b5e20;--success-border: #4caf50;--success-color: #4caf50;--fast-color: #2196f3;--slow-color: #ff9800;--error-color: #f44336;--button-primary-bg: #4caf50;--button-primary-hover: #45a049;--button-primary-border: #45a049;--button-primary-text: #fff;--button-secondary-border: #555;--button-secondary-bg: #333;--timed-bg: #2196f3;--timed-result-bg: #1565c0;--timed-result-border: #2196f3;--timed-score-color: #64b5f6}}"],changeDetection:0})};export{h as SummaryComponent};
